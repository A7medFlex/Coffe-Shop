let openBtn=document.querySelectorAll(".aboutItems .aboutItem .itemImg .btn"),clickSound=document.querySelector("#clicking");openBtn.forEach(e=>{e.addEventListener("click",e=>{clickSound.play(),openBtn.forEach(e=>{e.parentElement.classList.remove("active"),e.style.animation="none"}),e.currentTarget.parentElement.classList.add("active");let t=document.querySelectorAll(".aboutItem .itemOffCanvas img");t.forEach(e=>{e.remove()});let d=document.createElement("img");d.src=e.currentTarget.parentElement.firstChild.src,e.currentTarget.parentElement.nextSibling.appendChild(d)})});let closingBtn=document.querySelectorAll(".aboutItem .closing");closingBtn.forEach(e=>{e.addEventListener("click",()=>{openBtn.forEach(e=>{e.parentElement.classList.remove("active"),e.style.animation="btnAnim 0.5s ease infinite"})})});let questionbtnopen=document.querySelectorAll(".questions .s-question .q .fa-lock-alt"),questionbtnclose=document.querySelectorAll(".questions .s-question .q .fa-lock-open-alt");questionbtnopen.forEach(e=>{e.addEventListener("click",e=>{document.querySelector("#clickingAudio").play(),questionbtnopen.forEach(e=>{e.nextElementSibling.style.display="none",e.style.display="inline-block"});let t=document.querySelectorAll(".s-question .a");t.forEach(e=>{e.classList.remove("active")}),e.currentTarget.parentElement.nextSibling.classList.toggle("active"),e.currentTarget.style.display="none",e.currentTarget.nextSibling.style.display="inline-block"})}),questionbtnclose.forEach(e=>{e.addEventListener("click",e=>{e.currentTarget.style.display="none",e.currentTarget.previousSibling.style.display="inline-block",e.currentTarget.parentElement.nextSibling.classList.remove("active")})}),document.documentElement.style.setProperty("--intro-img",localStorage.getItem("introImg")),console.log(localStorage),liImgs=document.querySelectorAll(".images-cont li"),liImgs.forEach(e=>{e.addEventListener("click",e=>{document.querySelector("#clicking").play(),document.documentElement.style.setProperty("--intro-img",e.currentTarget.dataset.img),localStorage.setItem("introImg",e.currentTarget.dataset.img)})});const logo=document.querySelectorAll("#logo path");for(let e=0;e<logo.length;e++)console.log(`${e} => ${logo[e].getTotalLength()}`);let BossCont=document.querySelector("section.products-page .container .products-cont");function getProducts(){let e=new Promise((e,t)=>{let d=new XMLHttpRequest;d.open("GET","https://coffeshopapi.herokuapp.com/api/products/",!0),d.onload=function(){4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):t(Error(d.statusText))},d.onerror=()=>{t(Error("faild to fetch the json object"))},d.send()});e.then(e=>{jsProdObj=e,jsProdObjLen=e.length,filteringProducts(jsProdObj),showProducts(jsProdObj)}).catch(e=>{console.log(e)})}function filteringProducts(o){let t=document.querySelector(".searchingBox .inputSearch input");t.oninput=e=>{if(t.value){document.querySelectorAll(".filtering a").forEach(e=>{e.remove()});let t=new RegExp(e.currentTarget.value,"i");var d=o.filter(e=>e.name.match(t));for(i=0;i<d.length;i++){let e=document.createElement("a");e.href=`product.html?id=${d[i].id}`;var n=document.createTextNode(d[i].name);e.appendChild(n);let t=document.createElement("img");t.classList.add("searchingImg"),t.src=d[i].image,e.appendChild(t),document.querySelector(".filtering").appendChild(e)}}else document.querySelectorAll(".filtering a").forEach(e=>{e.remove()})}}function showProducts(i){for(let r=1;r<=i.length;r++){let e=document.createElement("div");e.classList.add("product");let t=document.createElement("div");t.classList.add("product-image"),t.style.backgroundImage=`url("${i[r].image}")`;let d=document.createElement("a");d.classList.add("imgLink"),d.href=`product.html?id=${i[r].id}`,d.appendChild(t);let n=document.createElement("div");n.classList.add("product-data");let o=document.createElement("h3");o.classList.add("product-title");var s=document.createTextNode(i[r].name);o.appendChild(s),n.appendChild(o);let c=document.createElement("div");c.classList.add("product-desc");s=document.createTextNode(i[r].description);c.appendChild(s),n.appendChild(c);let a=document.createElement("span");a.classList.add("calories"),a.appendChild(document.createTextNode(i[r].calories)),n.appendChild(a);let l=document.createElement("a");l.href=`product.html?id=${i[r].id}`;s=document.createTextNode("Show Details");l.appendChild(s),n.appendChild(l),e.appendChild(d),e.appendChild(n),BossCont.appendChild(e)}}function getEachProd(){let e=window.location.search,n=e.slice(e.indexOf("=")+1),t=new Promise((e,t)=>{let d=new XMLHttpRequest;d.open("GET",`https://coffeshopapi.herokuapp.com/api/products/${n}`,!0),d.onload=function(){4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):t(Error(req.statusText))},d.onerror=()=>{t(Error("faild to fetch the json object"))},d.send()});t.then(e=>{showEachProd(e)}).catch(e=>{console.log(e)})}getProducts(),getEachProd();let subBoss=document.querySelector("section.singleProduct .mainProdCont");function showEachProd(e){let t=document.createElement("div");t.classList.add("productData");let d=document.createElement("div");d.classList.add("productSubdata"),t.appendChild(d);let n=document.createElement("div");n.classList.add("productImg"),n.style.backgroundImage=`url("${e.image}")`,d.appendChild(n);let o=document.createElement("div");o.classList.add("imgOverlay");let c=document.createElement("div");c.classList.add("overlayTitle"),c.appendChild(document.createTextNode(e.name)),o.appendChild(c);let a=document.createElement("div");a.classList.add("overlayCal"),a.appendChild(document.createTextNode(e.calories)),o.appendChild(a);let l=document.createElement("div");l.classList.add("overlayDesc"),l.appendChild(document.createTextNode(e.description)),o.appendChild(l);let r=document.createElement("div");r.classList.add("overlayNut"),r.appendChild(document.createTextNode(`Ingredients: ${e.nutrition}`)),o.appendChild(r);let i=document.createElement("a");i.classList.add("orderLink"),i.href=`order.html?id=${e.id}`;var s=document.createTextNode("Order Now");i.appendChild(s),o.appendChild(i),n.appendChild(o);let m=document.createElement("div");m.classList.add("spreadingBtn");let u=document.createElement("i");u.classList.add("fa-lock-alt","fal"),m.appendChild(u),d.appendChild(m);let p=document.createElement("div");p.classList.add("productTitle"),p.appendChild(document.createTextNode(e.name)),d.appendChild(p),subBoss.appendChild(t),CommentsPart(e);let h=document.querySelectorAll(".productImg .imgOverlay div"),g=document.querySelector(".spreadingBtn"),y=document.querySelector(".productSubdata .productImg"),v=document.querySelector(".productTitle"),L=document.querySelector(".productImg .imgOverlay");g.addEventListener("click",d=>{h.forEach(e=>{const t=document.querySelector(".clickingAudio");t.play(),y.classList.add("active"),v.classList.add("active"),L.classList.add("active"),e.classList.add("active"),d.target.style.display="none",document.querySelector(".orderLink").classList.add("active")})})}function CommentsPart(e){let t=document.createElement("div");t.classList.add("productComments");let d=document.createElement("div");d.classList.add("addingPart");let n=document.createElement("div");n.appendChild(document.createTextNode("Our clients reviews")),n.classList.add("reviewsParag"),d.appendChild(n);let o=document.createElement("div");o.classList.add("nameField");let c=document.createElement("input");c.type="text",c.setAttribute("required","required"),o.appendChild(c),c.classList.add("authorComment");let a=document.createElement("i");a.classList.add("fas","fa-user","userIcon"),o.appendChild(a),d.appendChild(o);let l=document.createElement("div");l.classList.add("messageField");let r=document.createElement("textarea");r.cols="20",r.rows="20",r.setAttribute("required","required"),l.appendChild(r),d.appendChild(l);let i=document.createElement("i");i.classList.add("fas","fa-envelope"),l.appendChild(i);let s=document.createElement("button");s.appendChild(document.createTextNode("add")),s.classList.add("messageBtn"),d.appendChild(s),t.appendChild(d),subBoss.appendChild(t),console.log(e);let m=document.createElement("div");m.classList.add("showingPart");let u=document.querySelector(".messageBtn"),p=document.querySelector(".authorComment"),h=document.querySelector(".messageField textarea");u.addEventListener("click",()=>{if(""!==p.value&&""!==h.value){document.querySelector(".errMsg")&&document.querySelector(".errMsg").remove();let e={};e.user_name=p.value,e.comment=h.value,e.date=(new Date).toLocaleString(),p.value="",h.value="";let t=document.createElement("div");t.classList.add("singleComment");let d=document.createElement("div");d.classList.add("commentAuthor"),d.appendChild(document.createTextNode(e.user_name));let n=document.createElement("div");n.classList.add("commentDate"),n.appendChild(document.createTextNode(e.date));let o=document.createElement("div");o.classList.add("authAndDate"),o.appendChild(d),o.appendChild(n),t.appendChild(o);let c=document.createElement("div");c.classList.add("commentContent"),c.appendChild(document.createTextNode(e.comment)),t.appendChild(c),m.appendChild(t);let a=window.location.search;var l=a.slice(a.indexOf("=")+1);fetch(`https://coffeshopapi.herokuapp.com/api/products/${l}/comments/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>!0).catch(e=>console.log(e))}else{document.querySelector(".errMsg")&&document.querySelector(".errMsg").remove();let e=document.createElement("div");e.appendChild(document.createTextNode("Please fill the fields.")),e.classList.add("errMsg");let t=document.querySelector(".addingPart");t.appendChild(e)}});let g=e.comments;g.forEach(e=>{let t=document.createElement("div");t.classList.add("singleComment");let d=document.createElement("div");d.classList.add("commentAuthor"),d.appendChild(document.createTextNode(e.user_name));let n=document.createElement("div");n.classList.add("commentDate"),n.appendChild(document.createTextNode(e.time));let o=document.createElement("div");o.classList.add("authAndDate"),o.appendChild(d),o.appendChild(n),t.appendChild(o);let c=document.createElement("div");c.classList.add("commentContent"),c.appendChild(document.createTextNode(e.comment)),t.appendChild(c),m.appendChild(t)}),console.log(g),t.appendChild(m),subBoss.appendChild(t)}function getProd(){let e=window.location.search,n=e.slice(e.indexOf("=")+1),t=new Promise((e,t)=>{let d=new XMLHttpRequest;d.open("GET",`https://coffeshopapi.herokuapp.com/api/products/${n}`,!0),d.onload=function(){4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):t(Error(req.statusText))},d.onerror=()=>{t(Error("faild to fetch the json object"))},d.send()});t.then(e=>{orderProd(e)}).catch(e=>{console.log(e)})}function orderProd(d){let e=document.querySelector("section.orderPage .container .mainContent"),t=document.createElement("div");t.classList.add("prodOrderDesc");let n=document.createElement("div");n.classList.add("productImgOrder"),n.style.backgroundImage=`url("${d.image}")`,t.appendChild(n);let o=document.createElement("div");o.appendChild(document.createTextNode(d.name)),o.classList.add("prodOrdName"),t.appendChild(o),e.appendChild(t);let c=document.createElement("div");c.classList.add("prodOrd");let a=document.createElement("div");a.classList.add("prodPrice");let l=document.createElement("span");l.appendChild(document.createTextNode(d.price)),a.appendChild(document.createTextNode("Price:")),a.appendChild(l);let r=document.createElement("span");r.appendChild(document.createTextNode("$")),a.appendChild(r);let i=document.createElement("div"),s=document.createElement("input");s.classList.add("count"),s.type="number",s.id="count",s.value="1",s.min="1",s.max="10";let m=document.createElement("label");m.for="count",m.appendChild(document.createTextNode("Amount:")),i.appendChild(m),i.appendChild(s);let u=document.createElement("div");u.classList.add("totalPrice"),u.appendChild(document.createTextNode("Total:")),u.appendChild(document.createElement("span")),c.appendChild(a),c.appendChild(i),c.appendChild(u),e.appendChild(c);let p=document.querySelector(".totalPrice span"),h=document.querySelector(".count"),g=document.querySelector(".prodPrice span");p.textContent=`${g.textContent}$`,h.onchange=e=>{p.textContent=`${e.currentTarget.value*g.textContent}$`};let y=document.createElement("div");y.classList.add("userData");let v=document.createElement("input");v.type="text",v.placeholder="Firstname",v.classList.add("ordFirstName"),y.appendChild(v);let L=document.createElement("input");L.type="text",L.placeholder="Lastname",L.classList.add("ordLastName"),y.appendChild(L);let C=document.createElement("input");C.type="text",C.placeholder="Address",C.classList.add("ordAddr"),y.appendChild(C);let E=document.createElement("input");E.type="text",E.placeholder="Phone number",E.classList.add("ordPhone"),y.appendChild(E);let S=document.createElement("button");S.classList.add("subOrd"),S.textContent="Send",y.appendChild(S),e.appendChild(y);let f=document.createElement("div");f.classList.add("orderModel");let q=document.createElement("div");q.classList.add("orderSent"),f.appendChild(q),e.appendChild(f);let x=document.querySelector(".userData button"),T=document.querySelectorAll(".userData input");x.addEventListener("click",e=>{let p={orderName:d.name,amount:parseInt(document.querySelector("input[type='number']").value),totalPrice:document.querySelector(".totalPrice span").textContent,clientName:`${document.querySelector(".userData input[placeholder='Firstname']").value} ${document.querySelector(".userData input[placeholder='Lastname']").value}`,clientAddr:document.querySelector(".userData input[placeholder='Address']").value,clientPhone:document.querySelector(".userData input[placeholder='Phone number']").value};console.log(p),T.forEach(e=>{if(""!==e.value){document.querySelector(".orderSent").innerHTML="";let e=document.createElement("div");e.appendChild(document.createTextNode("Name:"));let t=document.createElement("span");t.appendChild(document.createTextNode(p.clientName)),e.appendChild(t),document.querySelector(".orderSent").appendChild(e);let d=document.createElement("div");d.appendChild(document.createTextNode("Address:"));let n=document.createElement("span");n.appendChild(document.createTextNode(p.clientAddr)),d.appendChild(n),document.querySelector(".orderSent").appendChild(d);let o=document.createElement("div");o.appendChild(document.createTextNode("Phone:"));let c=document.createElement("span");c.appendChild(document.createTextNode(p.clientPhone)),o.appendChild(c),document.querySelector(".orderSent").appendChild(o);let a=document.createElement("div");a.appendChild(document.createTextNode("Order Name:"));let l=document.createElement("span");l.appendChild(document.createTextNode(p.orderName)),a.appendChild(l),document.querySelector(".orderSent").appendChild(a);let r=document.createElement("div");r.appendChild(document.createTextNode("Amount:"));let i=document.createElement("span");i.appendChild(document.createTextNode(p.amount)),r.appendChild(i),document.querySelector(".orderSent").appendChild(r);let s=document.createElement("div");s.appendChild(document.createTextNode("Price:"));let m=document.createElement("span");m.appendChild(document.createTextNode(p.totalPrice)),s.appendChild(m),document.querySelector(".orderSent").appendChild(s);let u=document.createElement("button");u.classList.add("confirmBtn"),u.appendChild(document.createTextNode("Confirm")),document.querySelector(".orderSent").appendChild(u),document.querySelector(".orderModel").classList.add("active"),document.querySelector(".orderSent").classList.add("active"),document.querySelector(".userData").classList.add("active")}});let t=document.querySelector(".confirmBtn");t.addEventListener("click",()=>{document.querySelector(".orderModel").classList.remove("active"),document.querySelector(".orderSent").classList.remove("active"),document.querySelector(".userData").classList.remove("active"),T.forEach(e=>{e.value=""});let e=document.createElement("div");e.classList.add("succssOrd"),e.appendChild(document.createTextNode("Order Sent successfully")),document.querySelector(".orderPage").appendChild(e),e.style.animation="fading 15s ease forwards",fetch("https://coffeshopapi.herokuapp.com/api/orders/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(e=>!0).catch(e=>console.log(e))})})}getProd(),document.addEventListener("click",e=>{e.target.classList.contains("orderModel")&&(document.querySelector(".orderModel").classList.remove("active"),document.querySelector(".orderSent").classList.remove("active"),document.querySelector(".userData").classList.remove("active"))}),1<localStorage.length?(document.documentElement.style.setProperty("--dominant1-wmode-color",localStorage.getItem("L")),document.documentElement.style.setProperty("--dominant1-bmode-color",localStorage.getItem("D")),document.querySelector("header .searchingBW .dl-mode").classList.add(localStorage.getItem("D-icon")),document.querySelector("header .searchingBW .dl-mode").classList.add(localStorage.getItem("L-icon"))):document.querySelector("header .searchingBW .dl-mode").classList.add("L");let searchingIcon=document.querySelector("header .searchingBW .fa-search"),searchingBox=document.querySelector(".searchingBox");searchingIcon.addEventListener("click",()=>{document.querySelector("audio").play(),searchingBox.classList.toggle("active"),document.querySelector(".searchingBox .inputSearch").classList.toggle("inert"),document.querySelector(".searchingBox .inputSearch input").focus(),document.querySelector(".searchingBox .filtering").classList.toggle("inert")}),console.log(searchingBox),document.addEventListener("click",e=>{e.target.classList.contains("inputSearch")||e.target.classList.contains("fa-search")||e.target.classList.contains("Sinput")||searchingBox.classList.contains("active")&&(searchingBox.classList.toggle("active"),document.querySelector(".searchingBox .inputSearch").classList.toggle("inert"),document.querySelector(".searchingBox .filtering").classList.toggle("inert"))});let dlMode=document.querySelector("header .searchingBW .dl-mode");dlMode.addEventListener("click",()=>{document.querySelector("audio").play(),dlMode.classList.toggle("D"),dlMode.classList.toggle("L"),dlMode.classList.contains("D")?(document.documentElement.style.setProperty("--dominant1-wmode-color","#ffffff"),document.documentElement.style.setProperty("--dominant1-bmode-color","#030712"),localStorage.setItem("L","#ffffff"),localStorage.setItem("D","#030712"),localStorage.setItem("D-icon","D"),localStorage.removeItem("L-icon")):(document.documentElement.style.setProperty("--dominant1-bmode-color","#ffffff"),document.documentElement.style.setProperty("--dominant1-wmode-color","#030712"),localStorage.setItem("D","#ffffff"),localStorage.setItem("L","#030712"),localStorage.setItem("L-icon","L"),localStorage.removeItem("D-icon"))});let hamburger=document.querySelector("#nav-icon1"),navLinks=document.querySelector("header ul");hamburger.addEventListener("click",e=>{e.stopPropagation(),e.currentTarget.classList.toggle("open"),navLinks.classList.toggle("open")}),navLinks.addEventListener("click",e=>{e.stopPropagation});let links=document.querySelectorAll("header ul li a"),activeBody=document.querySelector("body").classList.item(0),activeLink=null;for(let e=0;e<links.length;e++)if(links[e].textContent==activeBody){activeLink=links[e];break}activeLink.parentElement.classList.add("active");let Infos=document.querySelector("section.about .infos"),fromTop=Infos.offsetTop,outerHeight=Infos.offsetHeight,screenHeight=this.innerHeight;window.onscroll=()=>{window.pageYOffset>fromTop+outerHeight-2.1*screenHeight&&Infos.classList.add("active")};let modal=document.querySelector(".main-products-cont .modal"),previewImgs=document.querySelectorAll(".main-products-cont .product-cont .product img"),fullImg=document.querySelector(".main-products-cont .modal img"),caption=document.querySelector(".main-products-cont .modal p");previewImgs.forEach(e=>{e.addEventListener("click",()=>{document.querySelector("#clicking").play(),fullImg.src=e.src,caption.textContent=e.alt,modal.classList.add("open"),fullImg.classList.add("open")})}),document.addEventListener("click",e=>{e.target.classList.contains("modal")&&(modal.classList.remove("open"),fullImg.classList.remove("open"))});